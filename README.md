## ä¸å‡†ç™½å«–ï¼Œè¯·ç»™æˆ‘å…è´¹çš„starâ­å§ï¼Œååˆ†æ„Ÿè°¢ï¼

## ç®€ä»‹

[PandoraNext-TokensTool](https://github.com/Yanyutin753/PandoraNext-TokensTool) æ˜¯ä¸€ä¸ªåŸºäº [PandoraNext](https://github.com/pandora-next/deploy) ä¸­çš„ä¾¿æ·æ·»åŠ ç®¡ç†tokens.jsonå’Œconfig.josnçš„å·¥å…·ï¼Œæ—¨åœ¨æ›´åŠ ç®€ä¾¿åœ°ä½¿ç”¨[pandoraNext](https://github.com/pandora-next/deploy)èµ„æºï¼Œæ‰‹æœºç«¯ç”µè„‘ç«¯åœ¨çº¿ç®¡ç†PandoraNext,ä½¿å¾—å¯ä»¥æ–¹ä¾¿åœ°ç™½å«– chatGPTï¼Œæœ¬å·¥å…·æ˜¯ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šï¼Œæ–¹ä¾¿å¤§å®¶ï¼Œéº»çƒ¦ç»™ä¸ªä¸è¦é’±çš„æ˜Ÿæ˜Ÿâ­â­â­ï¼

## [ğŸ¦„ç‚¹å‡»æŸ¥çœ‹æ–‡æ¡£ç«™](https://apifox.com/apidoc/shared-40345b46-9c9c-45cc-b494-6a6a387a978f)


## åŠŸèƒ½ç‰¹æ€§

1. **ä¿å­˜è´¦å·ä¿¡æ¯ï¼š** æ”¯æŒä¿å­˜ OpenAI è´¦å·å¯†ç å’Œ tokenï¼Œæ–¹ä¾¿å¿«é€Ÿè®¿é—®ã€‚

2. **è‡ªåŠ¨æ·»åŠ åˆ é™¤ä¿®æ”¹tokenï¼š** å·¥å…·èƒ½å¤Ÿè‡ªåŠ¨åœ¨ tokens.josn ä¸­æ·»åŠ åˆ é™¤åˆ·æ–°tokenï¼Œç®€åŒ–é…ç½®è¿‡ç¨‹ã€‚

3. **è‡ªåŠ¨åˆ·æ–°share_token,access_token,pool_token**,tokensToolå·¥å…·ä¼šè‡ªåŠ¨é€šè¿‡openAIè´¦å·å¯†ç åˆ·æ–°tokens,é‡å¯PandoraNextï¼Œæ–¹ä¾¿ä½¿ç”¨ã€‚

4. **é€šè¿‡è´¦å·å¯†ç æ·»åŠ token**,è¯¥åŠŸèƒ½å¦‚ä»Šæ¢å¤æ­£å¸¸ ï¼Œé¿å…æŸ¥æ‰¾ç¹ççš„token

5. **ä¸€é”®æš‚åœï¼Œå¯åŠ¨,é‡å¯PandoraNext** ,ä½¿å¾—ä¿®æ”¹tokenæ•ˆç‡æ›´é«˜
   
6. **æ”¯æŒåœ¨çº¿ä¿®æ”¹config.jsonæ–‡ä»¶,é‡å¯PandoraNextç”Ÿæ•ˆ**

7. **æ”¯æŒçƒ­é‡è½½ï¼Œéœ€è¦åœ¨é…ç½®æ–‡ä»¶æˆ–è€…åœ¨ç½‘é¡µä¸Šæ·»åŠ é‡è½½å¯†ç ï¼Œå¼€å¯æœåŠ¡**

8. **æ–°å¢è„šæœ¬æ–‡ä»¶,çœŸä¸€é”®éƒ¨ç½²å¹¶æ›´æ–°PandoraNextå’ŒtokensToolåŒæœåŠ¡**

9.**æ–°å¢è·å–å¤šä¸ªpool_tokens**,æ–¹ä¾¿ä½¿ç”¨

10.**æ–°å¢è¿æ¥one-apiï¼Œä½¿å¾—ç”Ÿæˆçš„pool_tokenèƒ½å‘é€åˆ°one-apiï¼Œå®ç°åŒæ­¥æ›´æ–°**

11.**æ”¯æŒè½¬å‘copilotæ¥å£ï¼Œå¹¶æ”¯æŒæµå¼ä¼ è¾“**

- ç°å¦‚ä»Šåªæ”¯æŒè´¦å·å¯†ç ç™»å½•ï¼Œå¸Œæœ›å¤§ä½¬èƒ½æ‰©å……ï¼

#### åˆå§‹ç”¨æˆ·åï¼šroot åˆå§‹å¯†ç å€¼:123456 
#### **(è¯·åŠ¡å¿…åœ¨ç¬¬ä¸€æ¬¡ç™»å½•ä¹‹åä¿®æ”¹)**

## [âœ¨ç‚¹å‡»æŸ¥çœ‹æ–‡æ¡£ç«™](https://apifox.com/apidoc/shared-40345b46-9c9c-45cc-b494-6a6a387a978f)
<details>
<summary>

     æ—§çš„æ–‡æ¡£ï¼Œè¯·ç‚¹å‡»ä¸Šé¢è¿æ¥è·³è½¬æ–°çš„æ–‡æ¡£ç«™
</summary>

------------

## ä½¿ç”¨æ–¹æ³•

### ä¸€é”®éƒ¨ç½²PandoraNextå’ŒtokensTool(æœ€å¼ºæ¨è)

#### å°†ç›´æ¥æ‹‰å–æœ€æ–°ç‰ˆæœ¬çš„PandoraNextå’ŒtokensTool

```
# å®‰è£…git
(Ubuntu)
sudo apt update
sudo apt install git

ï¼ˆå¦‚Fedoraã€CentOSç­‰ï¼‰
sudo yum update
sudo yum install git

# å›½å†…
cd / && git clone https://gitee.com/yangyangEN/tokenTools-sh.git

# å›½å¤–
cd / && git clone https://github.com/Yanyutin753/tokenTools-sh.git

# è¿è¡Œè„šæœ¬
cd /tokenTools-sh && sudo sh install.sh

# ä¸€é”®æ›´æ–°pandoraNextå’ŒtokensToolæœåŠ¡
cd /tokenTools-sh && sudo sh update.sh

# æ›´æ–°update.shæˆ–è€…install.sh
sudo rm -rf /tokenTools-sh && cd / && git clone https://gitee.com/yangyangEN/tokenTools-sh.git
```

#### 1. å¼€æ”¾8081å’Œ8181ç«¯å£ï¼Œå…ˆè®¿é—®8081,ç„¶åå¡«å†™ç³»ç»Ÿå˜é‡ï¼ŒæŠŠ127.0.0.1:8181æ”¹æˆ0.0.0.0:8181

#### 2. åœ¨8081é¡µé¢çš„ç³»ç»Ÿå˜é‡é‡Œçš„tokentoolè®¾ç½®æ›´æ”¹è´¦å·å¯†ç ï¼Œå¹¶å¡«å†™[license_ip](https://dash.pandoranext.com)
***æ³¨æ„æ˜¯ä¸‹é¢ç±»ä¼¼æ‹¬å·é‡Œçš„å†…å®¹*****
```
curl -fLO "https://dash.pandoranext.com/data/ (uVlk_4ilqs23dfsdfdsfsdfOlgaPdNkgGDwesNmVHGoI_23) /license.jwt"
```

#### 3.è®¾ç½®ç›¸åº”çš„ä¿¡æ¯ï¼Œç‚¹å‡»é‡å¯PandoraNextï¼ŒæœŸé—´å¦‚é‡æ‰“ä¸å¼€PandoraNext,è¯·è€å¿ƒç­‰å¾…ä¸€ä¼šï¼Œå†é‡å¯PandoraNextå³å¯ï¼ˆçƒ­é‡è½½éœ€è¦åœ¨å®¹å™¨å¯åŠ¨ä¹‹åæ‰èƒ½è¿›è¡Œï¼‰


### å…·ä½“æƒ³è¦ä¿®æ”¹ä¸€é”®éƒ¨ç½²çš„ç«¯å£å¯ä»¥åœ¨/pandora/docker-compose.ymlé‡Œä¿®æ”¹

------------

## éä¸€é”®éƒ¨ç½²æ–¹å¼
### ç¯å¢ƒå˜é‡

- å¯åŠ¨ç«¯å£å·ï¼šserver.port=8081

- PandoraNextçš„éƒ¨ç½²æ–¹å¼ï¼š--deployWay=releases/docker
  
* æ‰‹åŠ¨éƒ¨ç½²--deployWay=releases

   * dockerå’Œdocker-composeéƒ¨ç½² --deployWay=docker

- PandoraNextä¸­å­˜æ”¾config.jsonçš„ä½ç½®ï¼ˆdockeréƒ¨ç½²åœ¨ä¸Šé¢ä»£ç æŸ¥åˆ°ä½ç½®ï¼‰ --deployPosition
  
   * å¦‚æœä½ çš„tokensToolçš„jaråŒ…æ”¾åœ¨äº†config.json --deployPosition=default

   * å¦‚æœä¸åœ¨çš„è¯å°±å¡«ä½ config.jsonçš„æ–‡ä»¶ç›®å½• ä¾‹å¦‚ï¼š--deployPosition=/www/wwwroot/PandoraNext/PandoraNext-v0.1.3-linux-386-51a5f88

- æ˜¯å¦å¼€å¯çƒ­é‡è½½ï¼š  --hotReload=true

- â­è®°ä½è·¯å¾„æ²¡æœ‰/config.json

- è®°å¾—ä¿®æ”¹ä½ çš„è·¯å¾„ï¼Œå¯†ç ï¼Œè´¦å·ï¼Œç«¯å£å·ï¼ˆé€‰å¡«ï¼‰ï¼Œæœ€æœ€é‡è¦æ²¡æœ‰æ‹¬å·


#### å¦‚æœä¸çŸ¥é“dockeré‡Œé¢å®¹å™¨config.jsonä½ç½®ï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹ä»£ç 

![image](https://github.com/Yanyutin753/PandoraNext-TokensTool/assets/132346501/8aacabd0-4cb1-4d44-a5e6-4bf1136b3865)
```
# æŸ¥æ‰¾å®¹å™¨åä¸º "PandoraNext" çš„æ‰€æœ‰æŒ‚è½½ä¿¡æ¯
docker inspect -f '{{range .Mounts}}{{.Destination}}: {{.Source}}{{"\n"}}{{end}}' PandoraNext
# æ‹¿åˆ°:åé¢çš„åœ°å€
```

### javaéƒ¨ç½²è¯¦æƒ…

```
# å…ˆæ‹¿åˆ°ç®¡ç†å‘˜æƒé™
sudo su -
# æç¤ºä½ è¾“å…¥å¯†ç è¿›è¡Œç¡®è®¤ã€‚è¾“å…¥å¯†ç å¹¶æŒ‰ç…§æç¤ºå®ŒæˆéªŒè¯ã€‚
```

```
# å®‰è£… OpenJDK 11ï¼š
sudo apt install openjdk-11-jdk
# å®‰è£…å®Œæˆåï¼Œå¯ä»¥é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥éªŒè¯ JDK å®‰è£…ï¼š
java -version
```

```
# å¡«å†™ä¸‹é¢è·¯å¾„
cd ï¼ˆä½ çš„jaråŒ…çš„ä½ç½®ï¼‰
```

##### è¿è¡Œç¨‹åº
```
# ä¾‹å¦‚
nohup java -jar pandoraNext-0.0.1-SNAPSHOT.jar --server.port=8081 --deployWay=releases --deployPosition=default --pandoara_Ip=127.0.0.1 > myput.log 2>&1 &

# ç­‰å¾…ä¸€ä¼š æ”¾è¡Œ8081ç«¯å£å³å¯è¿è¡Œï¼ˆè‡ªè¡Œè°ƒæ•´ï¼‰
```

## dockeréƒ¨ç½²è¯¦æƒ…
```
# å…ˆæ‹‰å–é•œåƒ
docker pull yangclivia/tokenstool:latest
```
#### æ‰‹åŠ¨éƒ¨ç½²PandoraNextå¯åŠ¨å‘½ä»¤
```
docker run -d \
  --restart=always \
  -u root \
  --name tokensTool \
  --net=host \
  --pid=host \
  --privileged=true \
  -v ï¼ˆä½ config.jsonçš„æ–‡ä»¶ç›®å½•ï¼‰:/data \
  yangclivia/tokenstool:latest \
  --deployWay=releases \
  --deployPosition=/data \
  --hotReload=true \
  --server.port=8081 \
  --pandoara_Ip=127.0.0.1
```
#### Dockeréƒ¨ç½²PandoraNextå¯åŠ¨å‘½ä»¤
```
docker run -d \
  --restart=always \
  -u root \
  --name tokensTool \
  --net=host \
  --pid=host \
  --privileged=true \
  -v ï¼ˆä½ config.jsonçš„æ–‡ä»¶ç›®å½•ï¼‰:/data \
  -v /var/run/docker.sock:/var/run/docker.sock \
  -v /usr/bin/docker:/usr/bin/docker \
  yangclivia/tokenstool:latest \
  --deployWay=docker \
  --deployPosition=/data \
  --hotReload=true \
  --server.port=8081 \
  --pandoara_Ip=127.0.0.1
```

### Docker Composeéƒ¨ç½²è¯¦æƒ…
## ä»£ç æ¨¡æ¿
```
version: '3'
services:
  tokensTool:
    image: yangclivia/tokenstool:latest
    container_name: tokensTool
    restart: always
    user: root
    network_mode: host
    pid: host
    privileged: true
    volumes:
      - ï¼ˆä½ config.jsonçš„æ–‡ä»¶ç›®å½•ï¼‰:/data
      - /var/run/docker.sock:/var/run/docker.sock
      - /usr/bin/docker:/usr/bin/docker
    command: 
      - --deployWay=(éƒ¨ç½²æ–¹å¼çœ‹ç¯å¢ƒå˜é‡)
      - --deployPosition=/data
      - --hotReload=true
      - --server.port=8081
      - --pandoara_Ip=127.0.0.1
```

##### å¯åŠ¨tokensTool
```

cd (ä½ çš„docker-compose.ymlä½ç½®)

docker-compose up -d
```

##### æ›´æ–°tokensToolé¡¹ç›®ä»£ç 
```
cd (ä½ çš„docker-compose.ymlä½ç½®)

docker-compose pull

docker-compose up -d
```

## æ³¨æ„äº‹é¡¹

1. pandoraå®¹å™¨ç«¯å£è·Ÿæ˜ å°„ç«¯å£ä¸€è‡´èƒ½å‡å°‘éº»çƒ¦ï¼Œbindç«¯å£è¦è·Ÿå®¹å™¨ç«¯å£ä¸€è‡´
2. ä¸åšåä»£çš„è¯ï¼Œè·¯ç”±ç«¯å£ä¹Ÿè¦è·Ÿåå°„ç«¯ä¸€è‡´ï¼Œåšçš„è¯å°±åœ¨tools proxy urlåœ°å€é‡Œé¢å†™ä¸Šhttp(s)://(ip:portæˆ–è€…åŸŸå)/åç¼€å
3. é»˜è®¤APIè°ƒç”¨æ¥å£ï¼šhttp(s)://(ip:portæˆ–è€…åŸŸå)/åç¼€å/v1/chat/completions



### åˆæ¬¡å¯åŠ¨ï¼Œè¯·æ ¹æ®æç¤ºå®Œæˆå¡«å†™ï¼Œå¹¶ä¹‹åé‡å¯pandoraNextæœåŠ¡

![c6494a936ee764d13929b1fef5693d0](https://github.com/Yanyutin753/PandoraNext-TokensTool/assets/132346501/d8f470d7-b280-41d5-afbf-0164732ef0ec)


	
### æƒ³è¦äºŒå¼€é¡¹ç›®çš„å‹å‹ä»¬ï¼Œå¯ä»¥è‡ªè¡Œéµå¾ªç›¸åº”çš„å¼€æºè§„åˆ™æ›´æ”¹å‰åç«¯é¡¹ç›®ï¼Œæœ¬äººå°ç™½ï¼Œé¡¹ç›®å†™çš„ä¸å¤ªå¥½ï¼Œè¿˜è¯·è°…è§£ï¼

## æ¥å£

1. /shared_token
   * è¯·æ±‚æ–¹å¼ä¸ºget
   * ç¤ºä¾‹ç½‘å€ï¼šhttp://ip:8081/shared_token?password=123456
   * è¿”å›
    ```
     {
    "code": 1,
    "msg": "success",
    "data": [
              "fk-Yasdasdasdasdasdasd",
              "fk-ssadasdd asdasdasdasM"
          ]
      }
     ```

2./token/shared_token
* è¯·æ±‚æ–¹å¼ä¸ºget
* ç¤ºä¾‹ç½‘å€ï¼šhttp://ip:8081/token/shared_token?password=123456&tokenName=tokenstool
* è¿”å›
```
{
"code": 1,
"msg": "success",
"data": "fk-I2hsq9weY_NnBm0Fgcsadsasdasdasg9_OFwn7A"
}
```

3 /access_token
   * è¯·æ±‚æ–¹å¼ä¸ºget
   * ç¤ºä¾‹ç½‘å€ï¼šhttp://ip:8081/access_token?password=123456
   * è¿”å›
```
{
"code": 1,
"msg": "success",
"data": [
      "access_token_1",
      "access_token_2"
  ]
}
```

4 /token/access_token
* è¯·æ±‚æ–¹å¼ä¸ºget
* ç¤ºä¾‹ç½‘å€ï¼šhttp://ip:8081/token/access_token?password=123456&tokenName=tokenstool
* è¿”å›
```
{
"code": 1,
"msg": "success",
"data": "access_token"
}
```

5 /token/pool_token
   * è¯·æ±‚æ–¹å¼ä¸ºget
   * ç¤ºä¾‹ç½‘å€ï¼šhttp://ip:8081/pool_token?password=123456&tokenName=tokenstool
   * è¿”å›
     ```
      {
          "code": 1,
          "msg": "success",
          "data": "pk-L25JirYw2mWiyRqasdasdSCYrnovbHkmXIA7jDUs-Zpug"
      }
     ```
</details>


### åœ¨çº¿ä¿®æ”¹ç³»ç»Ÿè®¾ç½®ï¼Œå¯åŠ¨ï¼Œé‡å¯ï¼Œæš‚åœPandoraNextæ“ä½œ

![9f04e44841c765f8d066fbdda395e5f](https://github.com/Yanyutin753/PandoraNext-TokensTool/assets/132346501/c3d3a252-c936-4156-886e-2a17ccd540db)

### é¡¹ç›®éµå¾ªç›¸åº”çš„å¼€æºè§„åˆ™ï¼Œè¯·è‡ªè¡Œé£Ÿç”¨


## å¼ºè°ƒ

* æœ¬é¡¹ç›®æ˜¯ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šçš„ï¼Œæ„Ÿè°¢[Pandora](https://github.com/pandora-next/deploy)è¶…çº§æ— æ•Œå§‹çš‡!ï¼Œæ¬¢è¿å„ä½æ¥å¸®åŠ©ä¿®æ”¹æœ¬é¡¹ç›®ï¼Œä½¿å¾—æœ¬é¡¹ç›®å˜å¾—æ›´æ–¹ä¾¿ï¼Œæ›´ç®€å•ï¼

* æœ‰ç¾¤ä½¬å†™äº†ä¸€ä¸ªè‡ªåŠ¨åˆ·æ–°tokençš„[è„šæœ¬](https://github.com/ALbur/autoTools/blob/main/autorenew.py)ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥è¯•è¯•ï¼

* æ–°å¢è¯¦ç»†ä½¿ç”¨[tokensToolsè¯´æ˜](https://github.com/Yanyutin753/PandoraNext-TokensTool/blob/main/simplyDeploy/readme.md)

## æ–°å¢ç¾¤èŠï¼Œç‚¹äº†â­ï¸å¯ä»¥è¿›ç¾¤è®¨è®ºéƒ¨ç½²ï¼Œæˆ‘æŠŠä½ ä»¬æ‹‰è¿›ç¾¤ï¼Œæ— å¹¿ï¼Œå¹¿å­è¸¢æ‰
![903c5a117387f1a236ba1ce3d83f867](https://github.com/Yanyutin753/PandoraNext-TokensTool/assets/132346501/a87d3070-6eb7-4ad0-8105-1d3e103b1c15)


### è¯·ç»™æˆ‘ä¸€ä¸ªå…è´¹çš„â­å§ï¼ï¼ï¼

## Star History

[![Star History Chart](https://api.star-history.com/svg?repos=Yanyutin753/PandoraNext-TokensTool&type=Date)](https://star-history.com/#Yanyutin753/PandoraNext-TokensTool&Date)
